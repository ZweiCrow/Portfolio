import React, { useEffect, useRef, useState } from "react";
import "../Utils/Sass/navbar.scss";

const NavBar = (props) => {
  const BoutonMenu = useRef();
  const Menu = useRef();
  const Panel = useRef();
  const [menu, setMenu] = useState(false);

  const hideMenu = () => {
    setTimeout(() => {
      const Menu = document.querySelector("#Menu");
      Menu.classList.remove("active");
      Menu.classList.add("hidden");
      setTimeout(() => {
        Menu.classList.remove("activeBlock");
        Menu.classList.add("hiddenBlock");
      }, 500);
    }, 10);
  };
  const showMenu = () => {
    const Menu = document.querySelector("#Menu");
    Menu.classList.remove("hiddenBlock");
    Menu.classList.add("activeBlock");
    setTimeout(() => {
      Menu.classList.remove("hidden");
      Menu.classList.add("active");
    }, 10);
  };
  const menuLinks = (x) => {
    if (x === 1) {
      props.intro();
      setMenu(false);
      setTimeout(() => {
        setMenu(false);
      }, 10);
    }
    if (x === 2) {
      props.about();
      setMenu(false);
      setTimeout(() => {
        setMenu(false);
      }, 10);
    }
    if (x === 3) {
      props.resume();
      setMenu(false);
      setTimeout(() => {
        setMenu(false);
      }, 10);
    }
    if (x === 4) {
      props.skills();
      setMenu(false);
      setTimeout(() => {
        setMenu(false);
      }, 10);
    }
    if (x === 5) {
      props.projects();
      setMenu(false);
      setTimeout(() => {
        setMenu(false);
      }, 10);
    }
    if (x === 6) {
      props.contact();
      setMenu(false);
      setTimeout(() => {
        setMenu(false);
      }, 10);
    }
  };

  if (menu) {
    showMenu();
  }
  if (!menu) {
    hideMenu();
  }

  useEffect(() => {
    let handler = (e) => {
      if (!Panel.current.contains(e.target)) {
        // Si le clic se trouve dans la zone du menu, il reste ouvert, sinon il se ferme
        setMenu(false);
      }
    };

    document.addEventListener("mousedown", handler); // Lance la fonction handler lors d'un  clic
  });

  return (
    <>
      <div id="NavBar">
        <div
          id="BoutonMenu"
          ref={BoutonMenu}
          onClick={() => {
            setMenu(!menu);
          }}
        >
          <svg
            width="16"
            height="8"
            viewBox="0 0 16 8"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M1 7H15M1 1H15"
              stroke="#FFF"
              strokeWidth="2"
              strokeLinecap="round"
              strokeLinejoin="round"
            />
          </svg>
        </div>

        <ul id="Navigation">
          <li>
            <div onClick={props.intro} className={(props.anchorIntro)? "activeNav" : ""}>
              <span>Home</span>
              <svg
                width="20"
                height="17"
                viewBox="0 0 20 17"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M10 2.69L15 7.19V15H13V9H7V15H5V7.19L10 2.69ZM10 0L0 9H3V17H9V11H11V17H17V9H20L10 0Z"
                  fill="#565656"
                />
              </svg>
            </div>
          </li>
          <li>
            <div onClick={props.about} className={(props.anchorAbout)? "activeNav" : ""}>
              <span>A&nbsp;propos</span>
              <svg
                width="100"
                height="97"
                viewBox="0 0 100 97"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M99.3425 87.9809C92.9948 76.8401 83.0829 68.1595 71.2023 63.3363C77.1104 58.9052 81.4745 52.7276 83.6765 45.6784C85.8785 38.6292 85.8067 31.0659 83.4714 24.0598C81.136 17.0536 76.6554 10.9599 70.6643 6.64179C64.6732 2.32364 57.4753 0 50.0902 0C42.7051 0 35.5072 2.32364 29.5161 6.64179C23.525 10.9599 19.0445 17.0536 16.7091 24.0598C14.3737 31.0659 14.3019 38.6292 16.5039 45.6784C18.7059 52.7276 23.0701 58.9052 28.9781 63.3363C17.0976 68.1595 7.18567 76.8401 0.837953 87.9809C0.444626 88.6134 0.182475 89.3185 0.0670849 90.0542C-0.0483048 90.79 -0.014578 91.5415 0.166261 92.264C0.3471 92.9865 0.671359 93.6653 1.11976 94.2599C1.56816 94.8546 2.13155 95.353 2.77644 95.7256C3.42133 96.0982 4.13454 96.3373 4.87369 96.4288C5.61284 96.5202 6.36283 96.4621 7.07907 96.2579C7.79531 96.0537 8.46319 95.7076 9.04299 95.2401C9.62279 94.7726 10.1027 94.1934 10.4541 93.5367C18.8434 79.0361 33.6589 70.3875 50.0902 70.3875C66.5215 70.3875 81.337 79.0407 89.7263 93.5367C90.488 94.7615 91.6961 95.642 93.0952 95.9922C94.4943 96.3424 95.9747 96.1348 97.2235 95.4133C98.4724 94.6918 99.3917 93.5129 99.7871 92.1259C100.183 90.7389 100.023 89.2525 99.3425 87.9809ZM26.015 35.2007C26.015 30.4391 27.427 25.7844 30.0724 21.8252C32.7179 17.8661 36.4779 14.7803 40.8771 12.9581C45.2762 11.1359 50.1169 10.6592 54.7871 11.5881C59.4572 12.5171 63.747 14.81 67.114 18.177C70.4809 21.5439 72.7739 25.8337 73.7028 30.5039C74.6318 35.174 74.155 40.0147 72.3328 44.4139C70.5106 48.813 67.4248 52.5731 63.4657 55.2185C59.5065 57.8639 54.8519 59.2759 50.0902 59.2759C43.7073 59.2685 37.588 56.7297 33.0746 52.2163C28.5612 47.7029 26.0224 41.5836 26.015 35.2007Z"
                  fill="#565656"
                />
              </svg>
            </div>
          </li>
          <li>
            <div onClick={props.resume} className={(props.anchorResume)? "activeNav" : ""}>
              <span>Parcour</span>
              <svg
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M5 4V1C5 0.734784 5.10536 0.48043 5.29289 0.292893C5.48043 0.105357 5.73478 0 6 0H14C14.2652 0 14.5196 0.105357 14.7071 0.292893C14.8946 0.48043 15 0.734784 15 1V4H19C19.2652 4 19.5196 4.10536 19.7071 4.29289C19.8946 4.48043 20 4.73478 20 5V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H1C0.734784 20 0.48043 19.8946 0.292893 19.7071C0.105357 19.5196 0 19.2652 0 19V5C0 4.73478 0.105357 4.48043 0.292893 4.29289C0.48043 4.10536 0.734784 4 1 4H5ZM2 15V18H18V15H2ZM2 13H18V6H2V13ZM7 2V4H13V2H7ZM9 10H11V12H9V10Z"
                  fill="#565656"
                />
              </svg>
            </div>
          </li>
          <li>
            <div onClick={props.skills} className={(props.anchorSkills)? "activeNav" : ""}>
              <span>Compétences</span>
              <svg
                width="26"
                height="25"
                viewBox="0 0 26 25"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M19.357 0L13.19 11.137H25.526L19.357 0ZM19.357 4.127L22.131 9.137H16.584L19.357 4.127ZM6 12.137C2.691 12.137 0 14.828 0 18.137C0 21.446 2.691 24.137 6 24.137C9.309 24.137 12 21.446 12 18.137C12 14.828 9.309 12.137 6 12.137ZM14 13.137V24.137H25V13.137H14ZM6 14.137C8.206 14.137 10 15.931 10 18.137C10 20.343 8.206 22.137 6 22.137C3.794 22.137 2 20.343 2 18.137C2 15.931 3.794 14.137 6 14.137ZM16 15.137H23V22.137H16V15.137Z"
                  fill="#565656"
                />
              </svg>
            </div>
          </li>
          <li>
            <div onClick={props.projects} className={(props.anchorProjets)? "activeNav" : ""}>
              <span>Projets</span>
              <svg
                width="26"
                height="25"
                viewBox="0 0 26 25"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M13 0L12.625 0.156L6.625 2.563L6 2.813V9.531L0.594 11.875L0 12.156V20.219L0.5 20.531L6.5 23.875L6.969 24.125L7.438 23.906L13 21.125L18.563 23.906L19.031 24.125L19.5 23.875L25.5 20.531L26 20.219V12.156L25.406 11.875L20 9.531V2.812L19.375 2.562L13.375 0.156L13 0ZM13 2.188L16.281 3.468L13 4.75L9.719 3.469L13 2.188ZM8 4.938L12 6.468V11.344L8 9.563V4.938ZM18 4.938V9.562L14 11.344V6.469L18 4.938ZM7 11.312L10.625 12.906L7 14.688L3.375 12.875L7 11.312ZM19 11.312L22.625 12.875L19 14.688L15.375 12.906L16.5 12.406L19 11.312ZM2 14.407L6 16.407V21.314L2 19.064V14.407ZM24 14.407V19.064L20 21.314V16.407L24 14.407ZM12 14.47V19.376L8 21.376V16.407L12 14.47ZM14 14.47L18 16.407V21.376L14 19.376V14.47Z"
                  fill="#565656"
                />
              </svg>
            </div>
          </li>
          <li>
            <div onClick={props.contact} className={(props.anchorContact)? "activeNav" : ""}>
              <span>Contact</span>
              <svg
                width="100"
                height="80"
                viewBox="0 0 100 80"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M100 10C100 4.5 95.5 0 90 0H10C4.5 0 0 4.5 0 10V70C0 75.5 4.5 80 10 80H90C95.5 80 100 75.5 100 70V10ZM90 10L50 35L10 10H90ZM90 70H10V20L50 45L90 20V70Z"
                  fill="#565656"
                />
              </svg>
            </div>
          </li>
        </ul>
      </div>

      <div id="Menu" ref={Menu}>
        <div id="Panel" ref={Panel}>
          <ul>
            <li>
              <p>Menu</p>
            </li>
            <li
              onClick={() => {
                menuLinks(1);
              }}
            >
              <svg
                width="20"
                height="17"
                viewBox="0 0 20 17"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M10 2.69L15 7.19V15H13V9H7V15H5V7.19L10 2.69ZM10 0L0 9H3V17H9V11H11V17H17V9H20L10 0Z"
                  fill="#565656"
                />
              </svg>
              Home
            </li>
            <li
              onClick={() => {
                menuLinks(2);
              }}
            >
              <svg
                width="100"
                height="97"
                viewBox="0 0 100 97"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M99.3425 87.9809C92.9948 76.8401 83.0829 68.1595 71.2023 63.3363C77.1104 58.9052 81.4745 52.7276 83.6765 45.6784C85.8785 38.6292 85.8067 31.0659 83.4714 24.0598C81.136 17.0536 76.6554 10.9599 70.6643 6.64179C64.6732 2.32364 57.4753 0 50.0902 0C42.7051 0 35.5072 2.32364 29.5161 6.64179C23.525 10.9599 19.0445 17.0536 16.7091 24.0598C14.3737 31.0659 14.3019 38.6292 16.5039 45.6784C18.7059 52.7276 23.0701 58.9052 28.9781 63.3363C17.0976 68.1595 7.18567 76.8401 0.837953 87.9809C0.444626 88.6134 0.182475 89.3185 0.0670849 90.0542C-0.0483048 90.79 -0.014578 91.5415 0.166261 92.264C0.3471 92.9865 0.671359 93.6653 1.11976 94.2599C1.56816 94.8546 2.13155 95.353 2.77644 95.7256C3.42133 96.0982 4.13454 96.3373 4.87369 96.4288C5.61284 96.5202 6.36283 96.4621 7.07907 96.2579C7.79531 96.0537 8.46319 95.7076 9.04299 95.2401C9.62279 94.7726 10.1027 94.1934 10.4541 93.5367C18.8434 79.0361 33.6589 70.3875 50.0902 70.3875C66.5215 70.3875 81.337 79.0407 89.7263 93.5367C90.488 94.7615 91.6961 95.642 93.0952 95.9922C94.4943 96.3424 95.9747 96.1348 97.2235 95.4133C98.4724 94.6918 99.3917 93.5129 99.7871 92.1259C100.183 90.7389 100.023 89.2525 99.3425 87.9809ZM26.015 35.2007C26.015 30.4391 27.427 25.7844 30.0724 21.8252C32.7179 17.8661 36.4779 14.7803 40.8771 12.9581C45.2762 11.1359 50.1169 10.6592 54.7871 11.5881C59.4572 12.5171 63.747 14.81 67.114 18.177C70.4809 21.5439 72.7739 25.8337 73.7028 30.5039C74.6318 35.174 74.155 40.0147 72.3328 44.4139C70.5106 48.813 67.4248 52.5731 63.4657 55.2185C59.5065 57.8639 54.8519 59.2759 50.0902 59.2759C43.7073 59.2685 37.588 56.7297 33.0746 52.2163C28.5612 47.7029 26.0224 41.5836 26.015 35.2007Z"
                  fill="#565656"
                />
              </svg>
              A propos
            </li>
            <li
              onClick={() => {
                menuLinks(3);
              }}
            >
              <svg
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M5 4V1C5 0.734784 5.10536 0.48043 5.29289 0.292893C5.48043 0.105357 5.73478 0 6 0H14C14.2652 0 14.5196 0.105357 14.7071 0.292893C14.8946 0.48043 15 0.734784 15 1V4H19C19.2652 4 19.5196 4.10536 19.7071 4.29289C19.8946 4.48043 20 4.73478 20 5V19C20 19.2652 19.8946 19.5196 19.7071 19.7071C19.5196 19.8946 19.2652 20 19 20H1C0.734784 20 0.48043 19.8946 0.292893 19.7071C0.105357 19.5196 0 19.2652 0 19V5C0 4.73478 0.105357 4.48043 0.292893 4.29289C0.48043 4.10536 0.734784 4 1 4H5ZM2 15V18H18V15H2ZM2 13H18V6H2V13ZM7 2V4H13V2H7ZM9 10H11V12H9V10Z"
                  fill="#565656"
                />
              </svg>
              Parcour
            </li>
            <li
              onClick={() => {
                menuLinks(4);
              }}
            >
              <svg
                width="26"
                height="25"
                viewBox="0 0 26 25"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M19.357 0L13.19 11.137H25.526L19.357 0ZM19.357 4.127L22.131 9.137H16.584L19.357 4.127ZM6 12.137C2.691 12.137 0 14.828 0 18.137C0 21.446 2.691 24.137 6 24.137C9.309 24.137 12 21.446 12 18.137C12 14.828 9.309 12.137 6 12.137ZM14 13.137V24.137H25V13.137H14ZM6 14.137C8.206 14.137 10 15.931 10 18.137C10 20.343 8.206 22.137 6 22.137C3.794 22.137 2 20.343 2 18.137C2 15.931 3.794 14.137 6 14.137ZM16 15.137H23V22.137H16V15.137Z"
                  fill="#565656"
                />
              </svg>
              Compétences
            </li>
            <li
              onClick={() => {
                menuLinks(5);
              }}
            >
              <svg
                width="26"
                height="25"
                viewBox="0 0 26 25"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M13 0L12.625 0.156L6.625 2.563L6 2.813V9.531L0.594 11.875L0 12.156V20.219L0.5 20.531L6.5 23.875L6.969 24.125L7.438 23.906L13 21.125L18.563 23.906L19.031 24.125L19.5 23.875L25.5 20.531L26 20.219V12.156L25.406 11.875L20 9.531V2.812L19.375 2.562L13.375 0.156L13 0ZM13 2.188L16.281 3.468L13 4.75L9.719 3.469L13 2.188ZM8 4.938L12 6.468V11.344L8 9.563V4.938ZM18 4.938V9.562L14 11.344V6.469L18 4.938ZM7 11.312L10.625 12.906L7 14.688L3.375 12.875L7 11.312ZM19 11.312L22.625 12.875L19 14.688L15.375 12.906L16.5 12.406L19 11.312ZM2 14.407L6 16.407V21.314L2 19.064V14.407ZM24 14.407V19.064L20 21.314V16.407L24 14.407ZM12 14.47V19.376L8 21.376V16.407L12 14.47ZM14 14.47L18 16.407V21.376L14 19.376V14.47Z"
                  fill="#565656"
                />
              </svg>
              Projets
            </li>
            <li
              onClick={() => {
                menuLinks(6);
              }}
            >
              <svg
                width="100"
                height="80"
                viewBox="0 0 100 80"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M100 10C100 4.5 95.5 0 90 0H10C4.5 0 0 4.5 0 10V70C0 75.5 4.5 80 10 80H90C95.5 80 100 75.5 100 70V10ZM90 10L50 35L10 10H90ZM90 70H10V20L50 45L90 20V70Z"
                  fill="#565656"
                />
              </svg>
              Contact
            </li>
          </ul>
        </div>
      </div>
    </>
  );
};

export default NavBar;
